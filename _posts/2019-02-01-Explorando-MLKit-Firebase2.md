---
layout: post
title:  "Explorando o ML Kit for Firebase"
date:   2019-02-01 05:00:00 +0200
categories: firebase
---
O artigo original pode ser encontrado no [Medium](https://medium.com/android-dev-moz/mlkit-537775bd7052)
<section data-field="body" class="e-content">
<h4 name="38c3" id="38c3" class="graf graf--h4 graf-after--h3 graf--subtitle">Parte 2â€Šâ€”â€ŠLinguagem Natural e IdentificaÃ§Ã£o de Linguagem</h4><p name="a0cd" id="a0cd" class="graf graf--p graf-after--h4">Este artigo faz parte da sÃ©rie Explorando o ML Kit for Firebase:</p><ol class="postList"><li name="e33c" id="e33c" class="graf graf--li graf-after--p"><a href="/firebase/2018/05/09/Explorando-MLKit-Firebase1.html" data-href="https://medium.com/android-dev-moz/mlkit-540f8e5438c1" class="markup--anchor markup--li-anchor" target="_blank">O novo serviÃ§o de Machine Learning do Firebase</a></li><li name="c66f" id="c66f" class="graf graf--li graf-after--li graf--trailing">Linguagem Natural e IdentificaÃ§Ã£o de Linguagem</li></ol></section><section name="6b60" class="section section--body"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="8f9e" id="8f9e" class="graf graf--p graf--leading">No ano passado, a equipa do Firebase anunciou um novo SDK que foi adicionado Ã  plataformaâ€Šâ€”â€Šo <a href="https://firebase.google.com/docs/ml-kit/" data-href="https://firebase.google.com/docs/ml-kit/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">ML Kit</a>. O ML Kit Ã© um SDK que permite que desenvolvedores utilizem Machine Learning em aplicativos Android e iOS. Se vocÃª ainda nÃ£o conhece o ML Kit, leia o <a href="https://medium.com/android-dev-moz/mlkit-540f8e5438c1" data-href="https://medium.com/android-dev-moz/mlkit-540f8e5438c1" class="markup--anchor markup--p-anchor" target="_blank">primeiro artigo</a> desta sÃ©rie.</p><p name="3df0" id="3df0" class="graf graf--p graf-after--p">Quando foi anunciado, o ML Kit sÃ³ tinha funcionalidades relacionadas com o ramo <a href="https://pt.wikipedia.org/wiki/Vis%C3%A3o_computacional" data-href="https://pt.wikipedia.org/wiki/Vis%C3%A3o_computacional" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">VisÃ£o Computacional</a> (Computer Vision). Mas hoje foi adicionada a primeira funcionalidade do ramo <a href="https://pt.wikipedia.org/wiki/Processamento_de_linguagem_natural" data-href="https://pt.wikipedia.org/wiki/Processamento_de_linguagem_natural" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Processamento de Linguagem Natural</a> (Natural Language Processing)â€Šâ€”â€Ša chamada identificaÃ§Ã£o de linguagem (Language Identification).</p><p name="a56f" id="a56f" class="graf graf--p graf-after--p">Assim, o ML Kit conta agora com 2 pacotes: o <strong class="markup--strong markup--p-strong">ML Vision</strong> (sobre o qual falei no <a href="https://medium.com/android-dev-moz/mlkit-540f8e5438c1" data-href="https://medium.com/android-dev-moz/mlkit-540f8e5438c1" class="markup--anchor markup--p-anchor" target="_blank">artigo anterior</a>) e o <strong class="markup--strong markup--p-strong">Natural Language</strong> (o tema deste artigo).</p><h3 name="076a" id="076a" class="graf graf--h3 graf-after--p">Natural Language</h3><p name="dd04" id="dd04" class="graf graf--p graf-after--h3">Enquanto que o ML Vision aplica conceitos de Machine Learning em imagens, o pacote Natural Language usa ML no processamento de texto.<br>Atualmente a Ãºnica funcionalidade inclusa neste pacote Ã© a <a href="https://firebase.google.com/docs/ml-kit/identify-languages" data-href="https://firebase.google.com/docs/ml-kit/identify-languages" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank"><strong class="markup--strong markup--p-strong">IdentificaÃ§Ã£o de Linguagem</strong></a>, sÃ³ estÃ¡ disponÃ­vel para Android ou iOS e sÃ³ Ã© possÃ­vel utilizÃ¡-la <strong class="markup--strong markup--p-strong">on-device</strong>, pois ainda nÃ£o tem uma versÃ£o <strong class="markup--strong markup--p-strong">cloud</strong>.</p><p name="34d8" id="34d8" class="graf graf--p graf-after--p">Para ter o Natural Language na sua app, vocÃª sÃ³ tem de:</p><ol class="postList"><li name="172a" id="172a" class="graf graf--li graf-after--p"><a href="https://medium.com/android-dev-moz/mlkit-540f8e5438c1" data-href="https://medium.com/android-dev-moz/mlkit-540f8e5438c1" class="markup--anchor markup--li-anchor" target="_blank">Adicionar o Firebase ao projecto</a>;</li><li name="f7fb" id="f7fb" class="graf graf--li graf-after--li">Adicionar a dependÃªncia do Natural Language no ficheiro build.gradle:</li></ol><pre name="51a6" id="51a6" class="graf graf--pre graf-after--li"><strong class="markup--strong markup--pre-strong">implementation &#39;com.google.firebase:firebase-ml-natural-language:18.1.1&#39;</strong></pre><h4 name="75ca" id="75ca" class="graf graf--h4 graf-after--pre">IdentificaÃ§Ã£o de linguagem</h4><p name="a1e2" id="a1e2" class="graf graf--p graf-after--h4">Como o nome sugere, esta funcionalidade analisa um texto e identifica em que linguagem/idioma esse texto estÃ¡ escrito.</p><p name="7419" id="7419" class="graf graf--p graf-after--p">Para utilizar esta funcionalidade, vocÃª tem de adicionar a sua dependÃªncia no build.gradle:</p><pre name="0fcf" id="0fcf" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">implementation &#39;com.google.firebase:firebase-ml-natural-language-language-id-model:18.0.2&#39;</strong></pre><p name="69a2" id="69a2" class="graf graf--p graf-after--pre">E na sua Activity/Fragment crie um objecto do tipo <code class="markup--code markup--p-code">FirebaseLanguageIdentification</code>Â :</p><pre name="c2f4" id="c2f4" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code u-paddingRight0 u-marginRight0"><strong class="markup--strong markup--pre-strong">val </strong>identification<strong class="markup--strong markup--pre-strong"> = FirebaseNaturalLanguage.getInstance().languageIdentification</strong></code></pre><p name="58d2" id="58d2" class="graf graf--p graf-after--pre">Esta funcionalidade pode ser usada de 2 maneiras:</p><ol class="postList"><li name="a504" id="a504" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Identificar a linguagem mais provÃ¡vel<br></strong>Ã‰ como clicar no botÃ£o â€œEstou com sorteâ€ (Iâ€™m feeling lucky) do Google Search. SerÃ¡ mostrada a linguagem com maior probabilidade.<br>Basta utilizar o mÃ©todo:</li></ol><pre name="aba7" id="aba7" class="graf graf--pre graf-after--li"><strong class="markup--strong markup--pre-strong">private fun</strong> identificarLinguagemMaisProvavel(texto: <strong class="markup--strong markup--pre-strong">String</strong>) {<br>    identification.identifyLanguage(texto)<br>        .addOnSuccessListener <strong class="markup--strong markup--pre-strong">{ </strong>linguagem <strong class="markup--strong markup--pre-strong">-&gt;<br>            if</strong> (linguagem == &quot;und&quot;) {<br>                // Linguagem desconhecida<br>            } <strong class="markup--strong markup--pre-strong">else</strong> {<br>                // Mostrar a linguagem na UI<br>            }<br>        <strong class="markup--strong markup--pre-strong">}<br>        </strong>.addOnFailureListener <strong class="markup--strong markup--pre-strong">{ </strong>e <strong class="markup--strong markup--pre-strong">-&gt;<br>            </strong>// Ocorreu um erro<br>        <strong class="markup--strong markup--pre-strong">}<br></strong>}</pre><p name="154a" id="154a" class="graf graf--p graf-after--pre">Por padrÃ£o, o SDK irÃ¡ mostrar a linguagem mais provÃ¡vel que tenha confidÃªncia maior do que 0,5Â . Mas se vocÃª quiser especificar o nÃºmero mÃ­nimo de confidÃªncia, vocÃª pode criar um objecto <code class="markup--code markup--p-code">FirebaseLanguageIdentificationOptions</code> e passar para o identificador:</p><pre name="01a0" id="01a0" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">val</strong> options = FirebaseLanguageIdentificationOptions.Builder()<br>    .setConfidenceThreshold(0.5f)<br>    .build()<br><br><strong class="markup--strong markup--pre-strong">val</strong> identification = FirebaseNaturalLanguage.getInstance()<br>    .getLanguageIdentification(options)</pre><p name="fe49" id="fe49" class="graf graf--p graf-after--pre">2.<strong class="markup--strong markup--p-strong"> Identificar todas linguagens possÃ­veis:<br></strong>Para ver todas as possibilidades, Ã© sÃ³ utilizar o mÃ©todo:</p><pre name="90aa" id="90aa" class="graf graf--pre graf-after--p"><strong class="markup--strong markup--pre-strong">private fun</strong> identificarLinguagensPossiveis(texto: <strong class="markup--strong markup--pre-strong">String</strong>) {<em class="markup--em markup--pre-em"><br>    </em>identification.identifyPossibleLanguages(texto)<br>        .addOnSuccessListener <strong class="markup--strong markup--pre-strong">{ </strong>linguagens<strong class="markup--strong markup--pre-strong"> -&gt;<br>            var</strong> output = &quot;&quot;<br>            <strong class="markup--strong markup--pre-strong">for (</strong>linguagem <strong class="markup--strong markup--pre-strong">in</strong> linguagens<strong class="markup--strong markup--pre-strong">) {</strong><br>                output += linguagem.<em class="markup--em markup--pre-em">languageCode </em>+ &quot; (${linguagem.<em class="markup--em markup--pre-em">confidence</em>})\n&quot;<br>            <strong class="markup--strong markup--pre-strong">}</strong><br>            // Mostrar o output na UI<br>        <strong class="markup--strong markup--pre-strong">}<br>        </strong>.addOnFailureListener <strong class="markup--strong markup--pre-strong">{ </strong>e <strong class="markup--strong markup--pre-strong">-&gt;<br>            </strong>// Ocorreu um erro<br>        <strong class="markup--strong markup--pre-strong">}<br></strong>}</pre><p name="c11a" id="c11a" class="graf graf--p graf-after--pre">Por padrÃ£o, serÃ£o mostradas todas linguagens com confidÃªncia maior do que 0,01. Mas se vocÃª quiser especificar o nÃºmero mÃ­nimo de confidÃªncia, crie um objeto <code class="markup--code markup--p-code">FirebaseLanguageIdentificationOptions</code> como mostrado no mÃ©todo 1 (linguagem mais provÃ¡vel).</p><p name="8686" id="8686" class="graf graf--p graf-after--p">Note que a String retornada pelo SDK Ã© o <a href="https://en.wikipedia.org/wiki/IETF_language_tag" data-href="https://en.wikipedia.org/wiki/IETF_language_tag" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">cÃ³digo BCP-47 da linguagem</a>. VocÃª pode encontrar a lista de todas as linguagens suportadas <a href="https://firebase.google.com/docs/ml-kit/langid-support" data-href="https://firebase.google.com/docs/ml-kit/langid-support" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">aqui</a>.</p><p name="0975" id="0975" class="graf graf--p graf-after--p">Veja o cÃ³digo completo da Activity aqui:</p><figure name="841d" id="841d" class="graf graf--figure graf--iframe graf-after--p"><script src="https://gist.github.com/rosariopfernandes/3f141391a21c5b88d3d0a935221c2d56.js"></script></figure><p name="a3e2" id="a3e2" class="graf graf--p graf-after--figure">Identificar linguagens no Android com o Firebase Ã© tÃ£o simples quanto isso. Esta funcionalidade pode nÃ£o parecer Ãºtil, mas Ã© sim em alguns casos de uso. Por exemplo: se vocÃª tiver criado uma aplicaÃ§Ã£o que Ã© uma espÃ©cie de um blog, vocÃª pode usar a identificaÃ§Ã£o de linguagens para analisar os blog posts que cada utilizador lÃª. Se vocÃª souber que um certo utilizador lÃª muitos posts em chinÃªs, talvez seja uma boa ideia recomendar-lhe mais posts em chinÃªs.</p><p name="3cd6" id="3cd6" class="graf graf--p graf-after--p">Pude notar que diferentemente do pacote ML Vision, o SDK do Natural Language nÃ£o ocupa tanto espaÃ§o assim. Quando testei o ML Vision pela primeira vez, o APK gerado tinha aproximadamente 15Mb. Enquanto usando o Natural Language, o APK tem aproximadamente 5Mb. Acho que Ã© uma diferenÃ§a compreensÃ­vel, pois o SDK do ML Vision certamente usa modelos mais complexos e provavelmente leva consigo algumas imagens usadas para o treinamento destes modelos.</p><p name="7967" id="7967" class="graf graf--p graf-after--p graf--trailing">Vale lembrar que esta Ã© sÃ³ a primeira funcionalidade que o Firebase traz para o pacote Natural Language. Ã‰ provÃ¡vel que ao longo do tempo sejam adicionadas mais funcionalidades para este pacote, afinal de contas vem aÃ­ o <a href="https://cloud.withgoogle.com/next18/" data-href="https://cloud.withgoogle.com/next18/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Cloud Next 19</a> e o <a href="https://events.google.com/io/" data-href="https://events.google.com/io/" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">Google I/O 2019</a>â€Šâ€”â€Šdois eventos anuais onde a Google tradicionalmente anuncia novas funcionalidades do Firebase. Irei atualizar este artigo sempre que houverem novidades neste pacote, entÃ£o continue me seguindo para nÃ£o perdÃª-las.</p></div></div></section><section name="909e" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><p name="daec" id="daec" class="graf graf--p graf--leading graf--trailing">Caso tenha alguma dÃºvida ou sugestÃ£o, deixe abaixo nos comentÃ¡rios. Se vocÃª estiver tentando usar o ML Kit e teve um problema, <a href="https://pt.stackoverflow.com/questions/ask?tags=firebase" data-href="https://pt.stackoverflow.com/questions/ask?tags=firebase" class="markup--anchor markup--p-anchor" rel="noopener" target="_blank">coloque ele no StackOverflow</a>, explicando o que vocÃª fez e qual foi o erro que teve. De certeza que vocÃª obterÃ¡ ajuda de mim ou de alguÃ©m da comunidade. ğŸ™‚</p></div></div>
</section>
